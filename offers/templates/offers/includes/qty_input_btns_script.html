<script type="text/javascript">

    const allQtyInputs = document.querySelectorAll(".qty-input");
    const incrQtyBtn = document.querySelector(".incr-qty-btn");
    const decrQtyBtn = document.querySelector(".decr-qty-btn");


    // Enables Buttons if value is over 98 or lower than 2
    const enableDisableBtns = (itemId) => {
        const incrQty = document.querySelector(`#incr-qty_${itemId}`);
        const decrQty = document.querySelector(`#decr-qty_${itemId}`);
        const qtyValue = document.querySelector(`#id_qty_${itemId}`);

        let currValue = parseInt(qtyValue.value);
        let plusDisabl = currValue > 98;
        let minusDisabl = currValue < 2;

        plusDisabl ? incrQty.disabled = true : incrQty.disabled = false;
        minusDisabl ? decrQty.disabled = true : decrQty.disabled = false;
    }


    // Event Listener for + Button
    allQtyInputs.forEach(qtyInput => {
        let itemId = qtyInput.dataset.item_id;

        enableDisableBtns(itemId);
    });


    // Event Listener for - Button
    allQtyInputs.forEach(qtyInput => {
        qtyInput.addEventListener("change", () => {
            let itemId = qtyInput.dataset.item_id;

            enableDisableBtns(itemId);
        });
    });


    incrQtyBtn.addEventListener("click", (e) => {
        e.preventDefault();
        let itemId = e.target.dataset.item_id;
        let closeInput = e.target.closest('.input-group').querySelectorAll('.qty-input')[0];
        let currValue = parseInt(closeInput.value);

        closeInput.value = currValue + 1;
        enableDisableBtns(itemId);
    });


    decrQtyBtn.addEventListener("click", (e) => {
        e.preventDefault();
        let itemId = e.target.dataset.item_id;
        let closeInput = e.target.closest('.input-group').querySelectorAll('.qty-input')[0];
        let currValue = parseInt(closeInput.value);

        closeInput.value = currValue - 1;
        enableDisableBtns(itemId);
    });


</script>